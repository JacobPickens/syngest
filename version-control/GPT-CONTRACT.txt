CHIT DUMP SYSTEM — GPT EXECUTION CONTRACT (ZIP-ENFORCED + ANTI-ECHO)

This document is the authoritative execution contract for the
CHIT DUMP snapshot system. It defines how ChatGPT MUST interpret,
process, modify, and return code.

This contract is absolute. No prior conversation, memory, repository,
or external context may override it.

============================================================
1) SOURCE OF TRUTH (ABSOLUTE)
============================================================

When a file named:

  dump_vX.Y.Z.zip

is uploaded, it is the ONLY source of truth.

ChatGPT MUST:
- Ignore all prior context
- Ignore any previously discussed code
- Treat the uploaded ZIP as the complete and authoritative codebase

============================================================
2) ZIP CONTENTS REQUIREMENTS
============================================================

2.1 Required contents (SINGLE-DUMP ONLY)

The INPUT ZIP is valid ONLY if it contains EXACTLY ONE file:

* dump.txt

No other entries are allowed:

* no README
* no notes
* no extra metadata files
* no folders
* no alternate dump filenames

Multipart ZIPs are FORBIDDEN.

2.2 Authoritative dump inside ZIP

ChatGPT MUST treat the DUMP file inside the ZIP as the authoritative representation of the codebase.
All edits MUST be performed by:
- parsing the DUMP
- applying changes to the represented files
- re-generating a new valid DUMP
- packaging that dump.txt into the OUTPUT ZIP

2.3 Toolchain-enforced packaging (HARD RULE)

ChatGPT MUST use the embedded dump scripts as the ONLY authoritative implementation of:

* dump generation
* ZIP packaging
* ZIP validation / unpackaging

In particular:

* The OUTPUT ZIP MUST be the byte-for-byte output of the embedded generator ZIP routine
  (generateDumpZip / writeDumpZip semantics).
* The INPUT ZIP MUST be validated and unpacked using the embedded apply/validator ZIP routines
  (applyDumpZip / validateZipDump semantics).
* ChatGPT MUST NOT hand-roll or “approximate” ZIP structure, CRCs, headers, etc.
  The embedded scripts define the canonical format.

============================================================
3) OUTPUT RULE (WHAT YOU MUST RETURN)
============================================================
When I request a multi-file change:

- Output ONLY a downloadable file named: dump_vA.B.C.zip
- Do NOT paste the full dump contents inline in chat.
- You may describe what changed in normal chat, but the dump itself must only be provided as the downloadable file.

The OUTPUT ZIP MUST contain EXACTLY ONE file:

* dump.txt

============================================================
4) ANTI-ECHO GUARANTEE (HARD RULE)
============================================================

If changes are requested, ChatGPT MUST NOT re-emit the INPUT ZIP unchanged.

Specifically, if any change is requested:
- The OUTPUT ZIP MUST NOT be byte-identical to the INPUT ZIP.
- The OUTPUT DUMP MUST NOT be content-identical to the INPUT DUMP.
- The OUTPUT META sha256 / hash MUST differ from the INPUT META sha256 / hash.
- Returning a re-packaged input ZIP (even with a new filename) is INVALID.

This rule is absolute and overrides any ambiguity about “rezipping” or “packaging.”

4.1 Code-change requirement (HARD RULE)

If ChatGPT outputs a new ZIP (i.e. not a no-op), it MUST include a real codebase change.
Meta-only changes do NOT count.

Specifically:

* At least one repo file's content (inside dump.txt) MUST differ from the INPUT dump.txt.
* Bumping version / timestamps / meta fields without changing any repo file content is INVALID.
* If the request produces no repo file changes, ChatGPT MUST NOT create a new ZIP.
  It MUST report the request as a no-op.

============================================================
5) VERSIONING RULES (HARD RULES)
============================================================

5.1 Mandatory version bump on any change

If changes are requested (even purely visual, comments, formatting, etc.):
- The OUTPUT version MUST be strictly greater than the INPUT version.

Example:
- Input:  dump_v0.2.0.zip
- Output: dump_v0.2.1.zip (or higher)

5.2 Output naming

The OUTPUT ZIP filename MUST match the OUTPUT dump version:

  dump_vA.B.C.zip

The embedded generator CLI enforces this via:
  node dump-generate.js --version=vA.B.C

ChatGPT MUST use that CLI semantics to determine output versioning.

============================================================
6) APPLY/PARSE SEMANTICS (HOW dump IS CONSUMED)
============================================================

When applying a dump:

A) Toolchain self-consistency
- The embedded toolchain scripts are authoritative.
- Applying a dump MUST use the embedded apply/validator routines for ZIP validation and extraction.

B) Refactors / deletions must be handled
- Track the manifest/state of the last applied dump (e.g., .repo_state.json).
- The active version MUST be updated after apply so the next generate can enforce version bump.

============================================================
7) OPERATOR QUICKSTART (CLI INTENT)
============================================================

Assume a Node.js CLI exists (or will exist) with these commands:

- npm run dump:generate -- --version=vX.Y.Z
  - writes versions/dump_vX.Y.Z.zip
  - ZIP contains ONLY dump.txt
  - dump.txt embeds META with version/toolchainVersion/etc.

- npm run dump:apply -- versions/dump_vX.Y.Z.zip
  - validates ZIP (single dump.txt)
  - applies dump.txt
  - updates .repo_state.json active version

End of contract.
