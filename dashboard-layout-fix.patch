--- a/views/dashboard.pug
+++ b/views/dashboard.pug
@@ -1,62 +1,84 @@
 extends layout

   block content

-    .wrap

-      header.header

+    main

+      header.hdrTop

         .title

           span.dot

           .tcopy

             .tmain SCAN DASH // LIVE VIEW

             .subtitle

-              span#hdrLastBlock Last block: —

+              span#hLastBlock Last block: —

               br

-              span#hdrLastTime Last scan: —

+              span#hLastTime Last scan: —

               br

-              span#hdrFirstEver First scrape: —

+              span#hFirstEver First scrape: —

 

-        .pills

+        .hdrMeta

+          .hdrPills

           .pill

             span.label UNIQUE

             span.value#pUnique 0

           .pill

             span.label OBS

-            span.value#pObs 0

+            span.value#pTotal 0

           .pill

             span.label HOT

             span.value#pHot 0

 

+          .pill

+            span.label FIRST

+            span.value#pFirst —

+          .pill

+            span.label LAST

+            span.value#pLast —

+

       .grid

-        .panel.terminal

-          .panelHeader

-            span.panelTitle TERMINAL

-            span.panelRight#termMeta —

+        .card.terminal

+          .consoleTop

+            span.mono TERMINAL

+            .tagRow

+              span.tag#tailTag —

+              span.tag#lastUpdateTag —

           pre.console#console

+.rightCol

+  //- Schedule card

+  .card.sched

+    form#schedForm

+      .cardHead

+        .mono NEXT SCAN

+        span.tag#schedState —

+      .meta

+        .row

+          label(for="delayMin") delay_minutes

+          input#delayMin(type="number" min="1" step="1" value="15")

+        .btnRow

+          button#armBtn.btn-warn(type="submit") Arm

+          button#disarmBtn.btn-danger(type="button") Cancel

+          button#runNowBtn.btn-run(type="button") Run now

+        .small

+          span.mono#countdown —

 

-        .panel.sched

-          .schedHead

-            .hleft

-              | NEXT SCAN

-              span.mono#countdown(style="margin-left:10px") —

-            .tag#schedState —

-          .schedBody

-            .row

-              label(for="delayMin") delay_minutes

-              input#delayMin(type="number" min="1" step="1" value="15")

-            .row

-              button#armBtn Arm

-              button#cancelBtn.secondary Cancel

-              button#runNowBtn.ghost Run now

-

-        .panel.results

-          .panelHeader

-            span.panelTitle RESULTS

-            span.panelRight#runMeta —

-          .tableWrap

-            table.table

-              thead

-                tr

-                  th IP

-                  th LAST SEEN

-                  th SEEN

-              tbody#rowsBody

-                tr

-                  td(colspan="3").muted waiting…

+  //- Results card

+  .card.results

+    .cardHead

+      span.mono RESULTS

+      .tagRow

+        span.tag#rowsTag 0 rows

+        span.tag#activeRunTag no runs

+    //- hidden meta fields used by JS (kept for compatibility)

+    .runMetaHidden(aria-hidden="true")

+      span#mRun —

+      span#mCreated —

+      span#mPort —

+      span#mSource —

+      span#mBlock —

+    .tableWrap

+      table.table

+        thead

+          tr

+            th IP

+            th LAST SEEN

+            th SEEN

+        tbody#rowsBody

+          tr

+            td(colspan="3").muted waiting…


--- a/public/css/terminal.css
+++ b/public/css/terminal.css
@@ -1,5 +1,4 @@
 /* --- public/css/terminal.css --- */

-/* :contentReference[oaicite:1]{index=1} */

 :root{

   --bg:#050611;

   --panel:#070a1b;

@@ -316,7 +315,7 @@
 

 .grid{

   display:grid;

-  grid-template-columns: 520px 1fr;

+  grid-template-columns: 1fr 520px;

   gap:14px;

   align-items:start;

 }

@@ -324,7 +323,35 @@
   .grid{ grid-template-columns: 1fr; }

 }

 

-.card{

+

+.rightCol{

+  display:flex;

+  flex-direction:column;

+  gap:14px;

+}

+

+.tagRow{

+  display:flex;

+  align-items:center;

+  justify-content:flex-end;

+  gap:8px;

+  flex-wrap:wrap;

+}

+

+.btnRow{

+  display:flex;

+  align-items:center;

+  gap:10px;

+  flex-wrap:wrap;

+  margin-top:10px;

+}

+

+.runMetaHidden{

+  display:none;

+}

+

+.card,

+.panel{

   border:1px solid rgba(255,255,255,.16);

   background:

     radial-gradient(900px 260px at 20% -10%, rgba(45,255,223,.10), transparent 55%),

@@ -342,7 +369,8 @@
     0 0 18px rgba(255,45,247,.06);

 }

 

-.cardHead{

+.cardHead,

+.panelHeader{

   padding:12px 14px;

   border-bottom:1px solid rgba(255,255,255,.12);

   display:flex; align-items:center; justify-content:space-between; gap:10px;

@@ -687,3 +715,7 @@
     0 0 16px rgba(45,255,223,.18),

     0 0 22px rgba(255,45,247,.10);

 }

+

+@media (min-width: 1001px){

+  .terminal .console{ height: 460px; }

+}


--- a/public/js/dashboard.js
+++ b/public/js/dashboard.js
@@ -1,9 +1,24 @@
 /* --- public/js/dashboard.js --- */

-/* :contentReference[oaicite:0]{index=0} */

 (() => {

   'use strict';

 

   const el = (id) => document.getElementById(id);

+  const elAny = (...ids) => {

+    for (const id of ids) {

+      const x = el(id);

+      if (x) return x;

+    }

+    return null;

+  };

+  const setText = (ids, value) => {

+    const x = elAny(...ids);

+    if (x) x.textContent = value;

+  };

+  const onAny = (ids, evt, handler) => {

+    const x = elAny(...ids);

+    if (x) x.addEventListener(evt, handler);

+    return x;

+  };

   const clamp = (n, a, b) => Math.max(a, Math.min(b, n));

 

   const state = {

@@ -45,28 +60,28 @@
     const lastAt = meta && meta.created_at ? fmtTs(meta.created_at) : '—';

     const firstEver = firstEverAtSec ? fmtTs(firstEverAtSec) : '—';

 

-    if (el('hLastBlock')) el('hLastBlock').textContent = lastBlock;

-    if (el('hLastTime')) el('hLastTime').textContent = lastAt;

-    if (el('hFirstEver')) el('hFirstEver').textContent = firstEver;

+    setText(['hLastBlock','hdrLastBlock'], lastBlock);

+    setText(['hLastTime','hdrLastTime'], lastAt);

+    setText(['hFirstEver','hdrFirstEver'], firstEver);

   }

 

   function setMeta(meta, block){

     if (!meta) {

-      el('activeRunTag').textContent = 'no runs';

-      el('mRun').textContent = '—';

-      el('mCreated').textContent = '—';

-      el('mPort').textContent = '—';

-      el('mSource').textContent = '—';

-      el('mBlock').textContent = '—';

+      setText(['activeRunTag'], 'no runs');

+      setText(['mRun'], '—');

+      setText(['mCreated'], '—');

+      setText(['mPort'], '—');

+      setText(['mSource'], '—');

+      setText(['mBlock'], '—');

       return;

     }

 

-    el('activeRunTag').textContent = meta.run_table || '—';

-    el('mRun').textContent = meta.run_table || '—';

-    el('mCreated').textContent = fmtTs(meta.created_at);

-    el('mPort').textContent = meta.port != null ? String(meta.port) : '—';

-    el('mSource').textContent = meta.source || '—';

-    el('mBlock').textContent = (block && block.ip_block) ? block.ip_block : '—';

+    setText(['activeRunTag'], meta.run_table || '—');

+    setText(['mRun'], meta.run_table || '—');

+    setText(['mCreated'], fmtTs(meta.created_at));

+    setText(['mPort'], meta.port != null ? String(meta.port) : '—');

+    setText(['mSource'], meta.source || '—');

+    setText(['mBlock'], (block && block.ip_block) ? block.ip_block : '—');

   }

 

   function pulse(id){

@@ -82,12 +97,20 @@
   function applyDbStats(stats){

     if (!stats) return;

 

+    const $pUnique = elAny('pUnique');

+    const $pTotal = elAny('pTotal','pObs');

+    const $pHot = elAny('pHot');

+    const $pFirst = elAny('pFirst');

+    const $pLast = elAny('pLast');

+

+    if (!$pUnique || !$pTotal || !$pHot) return;

+

     const prev = {

-      unique: el('pUnique').textContent,

-      total: el('pTotal').textContent,

-      hot: el('pHot').textContent,

-      first: el('pFirst').textContent,

-      last: el('pLast').textContent

+      unique: $pUnique.textContent,

+      total: $pTotal.textContent,

+      hot: $pHot.textContent,

+      first: $pFirst ? $pFirst.textContent : '',

+      last: $pLast ? $pLast.textContent : ''

     };

 

     const next = {

@@ -98,17 +121,17 @@
       last: fmtTs(stats.last_seen)

     };

 

-    el('pUnique').textContent = next.unique;

-    el('pTotal').textContent = next.total;

-    el('pHot').textContent = next.hot;

-    el('pFirst').textContent = next.first;

-    el('pLast').textContent = next.last;

+    $pUnique.textContent = next.unique;

+    $pTotal.textContent = next.total;

+    $pHot.textContent = next.hot;

+    if ($pFirst) $pFirst.textContent = next.first;

+    if ($pLast) $pLast.textContent = next.last;

 

     if (prev.unique !== next.unique) pulse('pillUnique');

     if (prev.total !== next.total) pulse('pillTotal');

     if (prev.hot !== next.hot) pulse('pillHot');

-    if (prev.first !== next.first) pulse('pillFirst');

-    if (prev.last !== next.last) pulse('pillLast');

+    if ($pFirst && prev.first !== next.first) pulse('pillFirst');

+    if ($pLast && prev.last !== next.last) pulse('pillLast');

   }

 

   function rowSig(rows){

@@ -180,8 +203,8 @@
       const r = await fetch(`/api/tail?key=${encodeURIComponent(state.tailKey)}`);

       const j = await r.json();

       if (j && j.text) appendConsole(j.text);

-      el('tailTag').textContent = j && j.source ? j.source : '—';

-      el('lastUpdateTag').textContent = new Date().toISOString().replace('T',' ').replace('Z','Z');

+      setText(['tailTag','termMeta'], j && j.source ? j.source : '—');

+      setText(['lastUpdateTag'], new Date().toISOString().replace('T',' ').replace('Z','Z'));

     } catch {}

   }

 

@@ -229,22 +252,22 @@
       const r = await fetch(`/api/run/${encodeURIComponent(state.activeRun)}/rows?limit=50`);

       const j = await r.json();

       renderRows(Array.isArray(j) ? j : []);

-      el('rowsTag').textContent = `${Array.isArray(j) ? j.length : 0} rows`;

+      setText(['rowsTag'], `${Array.isArray(j) ? j.length : 0} rows`);

     } catch {}

   }

 

   function updateScheduleUi(){

     const st = scheduleState || {};

     const armed = !!st.armed;

-    el('schedState').textContent = armed ? 'ARMED' : 'DISARMED';

+    setText(['schedState'], armed ? 'ARMED' : 'DISARMED');

 

     if (armed && st.nextRunAtMs && Number.isFinite(Number(st.nextRunAtMs))) {

       const ms = Number(st.nextRunAtMs) - Date.now();

-      el('countdown').textContent = fmtMs(ms);

+      setText(['countdown'], fmtMs(ms));

     } else if (armed) {

-      el('countdown').textContent = '—';

+      setText(['countdown'], '—');

     } else {

-      el('countdown').textContent = '—';

+      setText(['countdown'], '—');

     }

 

     // lock form during run

@@ -333,12 +356,15 @@
     // apply action button styling classes

     applyActionButtonClasses();

 

-    el('schedForm').addEventListener('submit', (e) => {

+    const schedForm = el('schedForm');

+    if (schedForm) schedForm.addEventListener('submit', (e) => {

       e.preventDefault();

       armSchedule();

     });

-    el('disarmBtn').addEventListener('click', disarmSchedule);

-    el('runNowBtn').addEventListener('click', runNow);

+    else onAny(['armBtn','btnArm'], 'click', (e) => { e.preventDefault(); armSchedule(); });

+

+    onAny(['disarmBtn','btnCancel','cancelBtn'], 'click', disarmSchedule);

+    onAny(['runNowBtn','btnRunNow'], 'click', runNow);

 

     // polls

     setInterval(pollTail, 1000);


--- a/views/layout.pug
+++ b/views/layout.pug
@@ -5,7 +5,7 @@
     meta(name="viewport", content="width=device-width, initial-scale=1")

     title #{title}

     link(rel="stylesheet", href="/public/css/terminal.css")

-  body(class="scanlines")

+  body(class="scanlines noPulse")

     //- scanlines MUST be its own layer (so it doesn't collide with body:before grid)

     div.scanlinesOverlay(aria-hidden="true")

     //- three laser grid layers (A/B via body pseudos, C via this div)
